{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { create } from 'zustand';\nimport { SettingsRepository } from \"../data/repositories\";\nexport var useSettingsStore = create(function (set, get) {\n  return {\n    viewMode: 'page',\n    fontSize: 'medium',\n    lineHeight: 'normal',\n    margin: 'normal',\n    font: 'sans',\n    einkMode: false,\n    haptic: false,\n    sound: false,\n    scrollAccel: 'normal',\n    loaded: false,\n    loadSettings: function () {\n      var _loadSettings = _asyncToGenerator(function* () {\n        try {\n          var settings = yield SettingsRepository.getAll();\n          set(_objectSpread(_objectSpread({}, settings), {}, {\n            loaded: true\n          }));\n        } catch (error) {\n          console.error('Failed to load settings:', error);\n          set({\n            loaded: true\n          });\n        }\n      });\n      function loadSettings() {\n        return _loadSettings.apply(this, arguments);\n      }\n      return loadSettings;\n    }(),\n    updateSetting: function () {\n      var _updateSetting = _asyncToGenerator(function* (key, value) {\n        try {\n          yield SettingsRepository.update(key, value);\n          set(_defineProperty({}, key, value));\n        } catch (error) {\n          console.error('Failed to update setting:', error);\n          throw error;\n        }\n      });\n      function updateSetting(_x, _x2) {\n        return _updateSetting.apply(this, arguments);\n      }\n      return updateSetting;\n    }()\n  };\n});","map":{"version":3,"names":["create","SettingsRepository","useSettingsStore","set","get","viewMode","fontSize","lineHeight","margin","font","einkMode","haptic","sound","scrollAccel","loaded","loadSettings","_loadSettings","_asyncToGenerator","settings","getAll","_objectSpread","error","console","apply","arguments","updateSetting","_updateSetting","key","value","update","_defineProperty","_x","_x2"],"sources":["C:/workspace/gong/app/store/useSettings.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { Settings } from '../data/types';\r\nimport { SettingsRepository } from '../data/repositories';\r\n\r\ninterface SettingsStore extends Settings {\r\n  loaded: boolean;\r\n  loadSettings: () => Promise<void>;\r\n  updateSetting: <K extends keyof Settings>(key: K, value: Settings[K]) => Promise<void>;\r\n}\r\n\r\nexport const useSettingsStore = create<SettingsStore>((set, get) => ({\r\n  viewMode: 'page',\r\n  fontSize: 'medium',\r\n  lineHeight: 'normal',\r\n  margin: 'normal',\r\n  font: 'sans',\r\n  einkMode: false,\r\n  haptic: false,\r\n  sound: false,\r\n  scrollAccel: 'normal',\r\n  loaded: false,\r\n\r\n  loadSettings: async () => {\r\n    try {\r\n      const settings = await SettingsRepository.getAll();\r\n      set({ ...settings, loaded: true });\r\n    } catch (error) {\r\n      console.error('Failed to load settings:', error);\r\n      set({ loaded: true });\r\n    }\r\n  },\r\n\r\n  updateSetting: async (key, value) => {\r\n    try {\r\n      await SettingsRepository.update(key, value);\r\n      set({ [key]: value } as any);\r\n    } catch (error) {\r\n      console.error('Failed to update setting:', error);\r\n      throw error;\r\n    }\r\n  }\r\n}));"],"mappings":";;;;AAAA,SAASA,MAAM,QAAQ,SAAS;AAEhC,SAASC,kBAAkB;AAQ3B,OAAO,IAAMC,gBAAgB,GAAGF,MAAM,CAAgB,UAACG,GAAG,EAAEC,GAAG;EAAA,OAAM;IACnEC,QAAQ,EAAE,MAAM;IAChBC,QAAQ,EAAE,QAAQ;IAClBC,UAAU,EAAE,QAAQ;IACpBC,MAAM,EAAE,QAAQ;IAChBC,IAAI,EAAE,MAAM;IACZC,QAAQ,EAAE,KAAK;IACfC,MAAM,EAAE,KAAK;IACbC,KAAK,EAAE,KAAK;IACZC,WAAW,EAAE,QAAQ;IACrBC,MAAM,EAAE,KAAK;IAEbC,YAAY;MAAA,IAAAC,aAAA,GAAAC,iBAAA,CAAE,aAAY;QACxB,IAAI;UACF,IAAMC,QAAQ,SAASjB,kBAAkB,CAACkB,MAAM,CAAC,CAAC;UAClDhB,GAAG,CAAAiB,aAAA,CAAAA,aAAA,KAAMF,QAAQ;YAAEJ,MAAM,EAAE;UAAI,EAAE,CAAC;QACpC,CAAC,CAAC,OAAOO,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;UAChDlB,GAAG,CAAC;YAAEW,MAAM,EAAE;UAAK,CAAC,CAAC;QACvB;MACF,CAAC;MAAA,SARDC,YAAYA,CAAA;QAAA,OAAAC,aAAA,CAAAO,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAZT,YAAY;IAAA,GAQX;IAEDU,aAAa;MAAA,IAAAC,cAAA,GAAAT,iBAAA,CAAE,WAAOU,GAAG,EAAEC,KAAK,EAAK;QACnC,IAAI;UACF,MAAM3B,kBAAkB,CAAC4B,MAAM,CAACF,GAAG,EAAEC,KAAK,CAAC;UAC3CzB,GAAG,CAAA2B,eAAA,KAAIH,GAAG,EAAGC,KAAK,CAAS,CAAC;QAC9B,CAAC,CAAC,OAAOP,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;UACjD,MAAMA,KAAK;QACb;MACF,CAAC;MAAA,SARDI,aAAaA,CAAAM,EAAA,EAAAC,GAAA;QAAA,OAAAN,cAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAbC,aAAa;IAAA;EASf,CAAC;AAAA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}